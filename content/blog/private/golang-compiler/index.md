---
title: Go のコンパイラのコードを読んでみよう
date: '2019-01-25T00:00:00.121Z'
desc: 'test'
keywords: ''
---

## 動機

## 目的

Go のコンパイラのコードを読むためにあると嬉しい知識をまとめます。

## コンパイラとは

そもそも、コンパイラとは何かをおさらいします。
コンパイラとは、高水準なプログラミング言語で書かれたプログラムをより低水準なプログラミング言語で書かれたプログラムへ変換するプログラムを指します。

一般的に、コンパイラは以下の流れに従ってコンパイルを行います。

![一般的なコンパイルの流れ](compiler.png)

### 字句解析

字句解析は、プログラムをトークンの列へ変換します。トークンとは、「意味を持つ最小単位」を指します。例えば、 `x := 1 + 23` という文について見てみましょう。意味を持ったまま `:=` をこれ以上分解することはできませんので、 `:=` はトークンであるといえます。これは `x` や `1` などにも同じことが言えます。よって、 `x := 1 + 23` は `x` `:=` `1` + `23` というトークンの列へ変換されます。

### 構文解析

構文解析は、トークン列からトークン同士の関係を表す木構造へ変換します。
例えば、 `x := 2 + 3 * 6` は以下のような木構造で表現することができます。
このように、構文解析によって得られた木構造を **構文木** と呼びます。

```
   :=
  /  \
 x    +
     / \
    2   *
       / \
      3   6
```

また、これらの構文木からコード生成に不要な部分を削除したものを、 **抽象構文木** (abstract syntax tree; AST) と呼びます。
多くの場合、構文解析ではトークン列から構文木に変換した上で、さらに抽象構文木へ変換します。

## Go のコンパイラについて

主に知られている Go のコンパイラは gc、gccgo、gollvm の 3 つです。

### gc



### gccgo

### gollvm

## gc によるコンパイルのフロー

### syntax パッケージ

### gc パッケージ

### ssa パッケージ

## ランタイム
